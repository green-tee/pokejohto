SandalineColony_PokemonCenter_MapScripts::
	map_script MAP_SCRIPT_ON_TRANSITION, SandalineColony_PokemonCenter_OnTransition
	map_script MAP_SCRIPT_ON_RESUME, CableClub_OnResume
	map_script MAP_SCRIPT_ON_FRAME_TABLE, SandalineColony_PokemonCenter_MapScripts_MAP_SCRIPT_ON_FRAME_TABLE
	.byte 0

SandalineColony_PokemonCenter_MapScripts_MAP_SCRIPT_ON_FRAME_TABLE:
	map_script_2 VAR_MAP_SCENE_SANDALINE_COLONY_POKECENTER, 1, SandalineColony_PokemonCenter_EventScript_BugsyStartPokeCenterTour
	.2byte 0


SandalineColony_PokemonCenter_OnTransition::
	setrespawn SPAWN_SANDALINE_COLONY
	compare VAR_MAP_SCENE_SANDALINE_COLONY_POKECENTER, 2
	goto_if_eq SandalineColony_PokemonCenter_OnTransition_1
	return

SandalineColony_PokemonCenter_OnTransition_1:
	call SandalineColony_PokemonCenter_EventScript_MoveBugsyToCounter
	return


SandalineColony_PokemonCenter_EventScript_MoveBugsyToCounter:
	setobjectxyperm 5, 6, 4
	return


SandalineColony_PokemonCenter_EventScript_BugsyStartPokeCenterTour::
	lockall
	applymovement 5, Movement_WalkInPlaceToTalkToPlayer
	waitmovement 5
	turnobject OBJ_EVENT_ID_PLAYER, DIR_WEST
	msgbox SandalineColony_PokemonCenter_Text_Bugsy_ThisIsAPokemonCenter
	closemessage
	applymovement 5, Movement_Bugsy_WalkToCounter
	delay 40
	applymovement OBJ_EVENT_ID_PLAYER, Movement_Player_WalkToCounter
	waitmovement 5
	waitmovement OBJ_EVENT_ID_PLAYER
	applymovement 5, Movement_WalkInPlaceToTalkToPlayer
	waitmovement 5
	msgbox SandalineColony_PokemonCenter_Text_Bugsy_TheMainAttraction
	closemessage
	setvar VAR_MAP_SCENE_SANDALINE_COLONY_POKECENTER, 2
	releaseall
	return


Movement_WalkInPlaceToTalkToPlayer:
	walk_in_place_right
	step_end

Movement_Bugsy_WalkToCounter:
	walk_down
	walk_right
	walk_down
	walk_down
	walk_right
	walk_right
	walk_right
	walk_right
	walk_up
	face_right
	step_end

Movement_Player_WalkToCounter:
	walk_down
	walk_down
	walk_down
	walk_right
	walk_right
	walk_right
	walk_right
	walk_right
	walk_up
	face_left
	step_end

SandalineColony_PokemonCenter_EventScript_Nurse::
	lock
	faceplayer
	compare VAR_MAP_SCENE_SANDALINE_COLONY_POKECENTER, 2
	goto_if_lt SandalineColony_PokemonCenter_EventScript_Nurse_2
	compare VAR_MAP_SCENE_SANDALINE_COLONY_POKECENTER, 2
	goto_if_eq SandalineColony_PokemonCenter_EventScript_Nurse_3
	call EventScript_PkmnCenterNurse
SandalineColony_PokemonCenter_EventScript_Nurse_1:
	release
	return

SandalineColony_PokemonCenter_EventScript_Nurse_2:
	call SandalineColony_PokemonCenter_EventScript_NurseBeforeTutorial
	goto SandalineColony_PokemonCenter_EventScript_Nurse_1

SandalineColony_PokemonCenter_EventScript_Nurse_3:
	call SandalineColony_PokemonCenter_EventScript_NurseTutorialHeal
	goto SandalineColony_PokemonCenter_EventScript_Nurse_1


SandalineColony_PokemonCenter_EventScript_NurseBeforeTutorial:
	message SandalineColony_PokemonCenter_Text_Nurse_HowMayIHelpYou
SandalineColony_PokemonCenter_EventScript_NurseBeforeTutorial_2:
	waitmessage
	multichoice 10, 6, MULTICHOICE_NURSE_BEFORE_TUTORIAL, TRUE
	switch VAR_RESULT
	case 0, SandalineColony_PokemonCenter_EventScript_NurseBeforeTutorial_6
	case 1, SandalineColony_PokemonCenter_EventScript_NurseBeforeTutorial_7
	case 2, SandalineColony_PokemonCenter_EventScript_NurseBeforeTutorial_8
SandalineColony_PokemonCenter_EventScript_NurseBeforeTutorial_4:
	closemessage
	compare VAR_RESULT, 2
	goto_if_ne SandalineColony_PokemonCenter_EventScript_NurseBeforeTutorial_9
SandalineColony_PokemonCenter_EventScript_NurseBeforeTutorial_1:
	compare VAR_RESULT, 2
	goto_if_ne SandalineColony_PokemonCenter_EventScript_NurseBeforeTutorial_2
	return

SandalineColony_PokemonCenter_EventScript_NurseBeforeTutorial_6:
	msgbox SandalineColony_PokemonCenter_Text_Nurse_ThisIsAPokemonCenter
	goto SandalineColony_PokemonCenter_EventScript_NurseBeforeTutorial_4

SandalineColony_PokemonCenter_EventScript_NurseBeforeTutorial_7:
	msgbox SandalineColony_PokemonCenter_Text_Nurse_YouAreLookingForAFriend
	goto SandalineColony_PokemonCenter_EventScript_NurseBeforeTutorial_4

SandalineColony_PokemonCenter_EventScript_NurseBeforeTutorial_8:
	msgbox SandalineColony_PokemonCenter_Text_Nurse_TellMeIfYouNeed
	goto SandalineColony_PokemonCenter_EventScript_NurseBeforeTutorial_4

SandalineColony_PokemonCenter_EventScript_NurseBeforeTutorial_9:
	message SandalineColony_PokemonCenter_Text_Nurse_IsThereAnythingElse
	goto SandalineColony_PokemonCenter_EventScript_NurseBeforeTutorial_1


SandalineColony_PokemonCenter_EventScript_NurseTutorialHeal:
	msgbox SandalineColony_PokemonCenter_Text_Nurse_DoYouWantToHeal, MSGBOX_YESNO
	compare VAR_RESULT, YES
	goto_if_eq SandalineColony_PokemonCenter_EventScript_NurseTutorialHeal_1
	msgbox SandalineColony_PokemonCenter_Text_Nurse_WheneverYouWantToHeal
	closemessage
	return

SandalineColony_PokemonCenter_EventScript_NurseTutorialHeal_1:
	msgbox SandalineColony_PokemonCenter_Text_Nurse_MayIHaveYourPokemon
	closemessage
	bufferpartymonnick STR_VAR_1, 0
	msgbox SandalineColony_PokemonCenter_Text_Scene_PlayerHandsTheParty, MSGBOX_DEFAULT
	closemessage
	applymovement VAR_LAST_TALKED, Movement_TurnToHealMachine
	waitmovement VAR_LAST_TALKED
	msgbox SandalineColony_PokemonCenter_Text_Nurse_IllPutThemInThisMachine
	closemessage
	special HealPlayerParty
	incrementgamestat GAME_STAT_USED_POKECENTER
	dofieldeffect FLDEFF_POKECENTER_HEAL
	waitfieldeffect FLDEFF_POKECENTER_HEAL
	msgbox SandalineColony_PokemonCenter_Text_Nurse_Done
	closemessage
	applymovement VAR_LAST_TALKED, Movement_TurnBackToPlayer
	waitmovement VAR_LAST_TALKED
	msgbox SandalineColony_PokemonCenter_Text_Nurse_ThankYourForYourPatience
	closemessage
	msgbox SandalineColony_PokemonCenter_Text_Scene_PlayerReceivedMonBack
	closemessage
	applymovement VAR_LAST_TALKED, Movement_Bow
	waitmovement VAR_LAST_TALKED
	msgbox Text_WeHopeToSeeYouAgain
	closemessage
	setvar VAR_MAP_SCENE_SANDALINE_COLONY_POKECENTER, 3
	goto_if_set FLAG_SYS_POKEDEX_GET, SandalineColony_PokemonCenter_EventScript_NurseTutorialHeal_5
SandalineColony_PokemonCenter_EventScript_NurseTutorialHeal_4:
	call SandalineColony_PokemonCenter_EventScript_EndPokemonCenterTutorial
	return

SandalineColony_PokemonCenter_EventScript_NurseTutorialHeal_5:
	setvar VAR_MAP_SCENE_ROUTE33, 1
	clearflag FLAG_HIDE_ROUTE33_GEODUDE
	goto SandalineColony_PokemonCenter_EventScript_NurseTutorialHeal_4


Movement_TurnToHealMachine:
	walk_in_place_faster_left
	step_end

Movement_TurnBackToPlayer:
	walk_in_place_faster_down
	step_end

SandalineColony_PokemonCenter_EventScript_EndPokemonCenterTutorial:
	turnobject 5, DIR_EAST
	turnobject OBJ_EVENT_ID_PLAYER, DIR_WEST
	msgbox SandalineColony_PokemonCenter_Text_Bugsy_PokemonCenterAreImportant
	closemessage
	applymovement 5, Movement_LookAtDoor
	waitmovement 5
	delay 90
	applymovement 5, Movement_FacePlayerSlowly
	waitmovement 5
	msgbox SandalineColony_PokemonCenter_Text_Bugsy_HeadToAzaleaTown
	closemessage
	applymovement 5, Movement_LeavePokeCenter
	waitmovement 5
	removeobject 5
	playse SE_EXIT
	delay 60
	return


SandalineColony_PokemonCenter_EventScript_Bugsy::
	msgbox SandalineColony_PokemonCenter_Text_Bugsy_AskTheNurseToHealYourPokemon, MSGBOX_NPC
	return


SandalineColony_PokemonCenter_EventScript_PreventPlayerFromEscapingHealing::
	lockall
	getplayerxy VAR_TEMP_1, VAR_TEMP_2
	compare VAR_TEMP_1, 8
	goto_if_lt SandalineColony_PokemonCenter_EventScript_PreventPlayerFromEscapingHealing_2
	applymovement 5, Movement_TurnEast
SandalineColony_PokemonCenter_EventScript_PreventPlayerFromEscapingHealing_1:
	msgbox SandalineColony_PokemonCenter_Text_Bugsy_WhereAreYouGoing
	waitmovement 5
	closemessage
	msgbox SandalineColony_PokemonCenter_Text_Bugsy_AskTheNurseToHealYourPokemon
	closemessage
	specialvar VAR_RESULT, GetPlayerFacingDirection
	switch VAR_RESULT
	case DIR_WEST, SandalineColony_PokemonCenter_EventScript_PreventPlayerFromEscapingHealing_7
	case DIR_SOUTH, SandalineColony_PokemonCenter_EventScript_PreventPlayerFromEscapingHealing_8
	case DIR_EAST, SandalineColony_PokemonCenter_EventScript_PreventPlayerFromEscapingHealing_9
SandalineColony_PokemonCenter_EventScript_PreventPlayerFromEscapingHealing_5:
	waitmovement OBJ_EVENT_ID_PLAYER
	turnobject 5, DIR_EAST
	releaseall
	return

SandalineColony_PokemonCenter_EventScript_PreventPlayerFromEscapingHealing_2:
	applymovement 5, Movement_TurnSouth
	goto SandalineColony_PokemonCenter_EventScript_PreventPlayerFromEscapingHealing_1

SandalineColony_PokemonCenter_EventScript_PreventPlayerFromEscapingHealing_7:
	applymovement OBJ_EVENT_ID_PLAYER, Movement_WalkBackToCounterFromLeft
	goto SandalineColony_PokemonCenter_EventScript_PreventPlayerFromEscapingHealing_5

SandalineColony_PokemonCenter_EventScript_PreventPlayerFromEscapingHealing_8:
	applymovement OBJ_EVENT_ID_PLAYER, Movement_WalkBackToCounterFromBelow
	goto SandalineColony_PokemonCenter_EventScript_PreventPlayerFromEscapingHealing_5

SandalineColony_PokemonCenter_EventScript_PreventPlayerFromEscapingHealing_9:
	applymovement OBJ_EVENT_ID_PLAYER, Movement_WalkBackToCounterFromRight
	goto SandalineColony_PokemonCenter_EventScript_PreventPlayerFromEscapingHealing_5


Movement_WalkBackToCounterFromLeft:
	walk_right
	walk_right
	step_end

Movement_WalkBackToCounterFromBelow:
	walk_up
	step_end

Movement_WalkBackToCounterFromRight:
	walk_left
	walk_left
	step_end

Movement_TurnSouth:
	walk_in_place_down
	step_end

Movement_TurnEast:
	walk_in_place_right
	step_end

Movement_LookAtDoor:
	walk_in_place_slow_down
	step_end

Movement_FacePlayerSlowly:
	walk_in_place_slow_right
	step_end

Movement_LeavePokeCenter:
	walk_down
	walk_down
	walk_right
	walk_down
	walk_down
	step_end
